(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7364:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(266),i=n(809),a=n.n(i),o=n(7294),s=function(){var e=(0,o.useState)(),t=e[0],n=e[1];return(0,o.useEffect)((function(){var e=function(){n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t},u=n(8216),c=n(5997),l=n(2809),d=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,r=n.text(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t,n){var r=e.createShader(t);if(r){if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log(e.getShaderInfoLog(r))}throw e.deleteShader(r),"Could not create shader"},h=function(){function e(t,n,r){(0,u.Z)(this,e),(0,l.Z)(this,"gl",void 0),(0,l.Z)(this,"prog",void 0),this.gl=t;var i=new Uint8Array([0,1,2,2,1,3]),a=new Float32Array([-1,-1,1,-1,-1,1,1,1]),o=f(this.gl,t.VERTEX_SHADER,n),s=f(this.gl,t.FRAGMENT_SHADER,r);this.prog=function(e,t,n){var r=e.createProgram();if(r){if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r))}throw e.deleteProgram(r),"Could not create Program"}(this.gl,o,s),t.useProgram(this.prog);var c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW);var d=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW);var h=t.getAttribLocation(this.prog,"pos"),v=t.createVertexArray();t.bindVertexArray(v),t.enableVertexAttribArray(h),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d)}return(0,c.Z)(e,[{key:"uniformLoc",value:function(e){return this.gl.getUniformLocation(this.prog,e)}},{key:"setFloat",value:function(e,t){var n=this.gl,r=this.uniformLoc(e);n.uniform1f(r,t)}},{key:"setVec2",value:function(e,t){var n=this.gl,r=this.uniformLoc(e);n.uniform2f(r,t[0],t[1])}},{key:"setVec3",value:function(e,t){var n=this.gl,r=this.uniformLoc(e);n.uniform3f(r,t[0],t[1],t[2])}},{key:"setVec4",value:function(e,t){var n=this.gl,r=this.uniformLoc(e);n.uniform4f(r,t[0],t[1],t[2],t[3])}},{key:"quad",value:function(){var e=this.gl;e.drawElements(e.TRIANGLES,6,e.UNSIGNED_BYTE,0)}}]),e}(),v=n(1664),m=(n(6049),n(5893)),g=function(){return(0,m.jsx)("div",{className:"text-white bg-gray-900 bg-opacity-50 p-3 flex justify-center",children:(0,m.jsx)("div",{className:"container mx-2 lg:mx-auto",children:(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{children:(0,m.jsx)(v.default,{passHref:!0,href:"/",children:(0,m.jsx)("div",{className:"btn btn-effect flex align-middle items-center py-1",children:(0,m.jsx)("h1",{className:"text-xl",children:"Mandelbrot set visualization"})})})}),(0,m.jsx)("div",{className:"flex gap-x-3",children:(0,m.jsx)("span",{className:"inline-block",children:(0,m.jsx)(v.default,{passHref:!0,href:"https://github.com/SushiWaUmai/Mandelbrot-Visualization",children:(0,m.jsx)("div",{className:"btn btn-effect flex align-middle items-center py-1",children:(0,m.jsx)("p",{className:"text-bold",children:"Github"})})})})})]})})})},x=function(){var e=(0,o.useRef)(null),t=(0,o.useState)(),n=t[0],i=t[1],u=(0,o.useState)(),c=u[0],l=u[1],f=(0,o.useState)(1),v=f[0],x=f[1],p=(0,o.useState)(80),b=p[0],w=p[1],E=(0,o.useState)(!1),j=E[0],N=E[1],_=(0,o.useState)([0,0]),y=_[0],A=_[1],L=s(),S=function(){null===c||void 0===c||c.quad()},R=function(){if(e.current){var t=window.innerWidth,r=window.innerHeight;e.current.width=t,e.current.height=r,null===n||void 0===n||n.viewport(0,0,t,r),null===c||void 0===c||c.setVec2("_screenSize",[t,r])}};(0,o.useEffect)((function(){var t=function(){var t=(0,r.Z)(a().mark((function t(){var n,r,o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.current){t.next=16;break}if(n=e.current.getContext("webgl2",{preserveDrawingBuffer:!0})){t.next=5;break}return console.log("No WebGL2 avaiable"),t.abrupt("return");case 5:return t.next=7,d("shaders/mandelbrot.vert");case 7:return r=t.sent,t.next=10,d("shaders/mandelbrot.frag");case 10:o=t.sent,s=new h(n,r,o),l(s),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),i(n);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();R(),t(),S()}),[]),(0,o.useEffect)((function(){var t,n=function(e){var t=window.innerWidth,n=window.innerHeight,r=e.deltaY>0?1:-1,i=Math.exp(.2*r),a=v*i-v,o=y[0]-function(e){return 2*(e/n-.5)-(t-n)/n}(e.pageX)*a,s=y[1]+function(e){return 2*(e/n-.5)}(e.pageY)*a;x(v*i),A([o,s])};return null===(t=e.current)||void 0===t||t.addEventListener("wheel",n),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("wheel",n)}}),[e,v,y]),(0,o.useEffect)((function(){window.innerWidth;var t,n,r,i=window.innerHeight,a=function(){N(!0)},o=function(e){j&&A((function(t){return[t[0]-2*e.movementX/i*v,t[1]+2*e.movementY/i*v]}))},s=function(){N(!1)};return null===(t=e.current)||void 0===t||t.addEventListener("mousedown",a),null===(n=e.current)||void 0===n||n.addEventListener("mousemove",o),null===(r=e.current)||void 0===r||r.addEventListener("mouseup",s),function(){var t,n,r;null===(t=e.current)||void 0===t||t.removeEventListener("mousedown",a),null===(n=e.current)||void 0===n||n.removeEventListener("mousemove",o),null===(r=e.current)||void 0===r||r.removeEventListener("mouseup",s)}}),[j,y,v]),(0,o.useEffect)((function(){null===c||void 0===c||c.setFloat("_scale",v),null===c||void 0===c||c.setVec2("_center",y),S()}),[y,c]),(0,o.useEffect)((function(){null===c||void 0===c||c.setFloat("_iterations",b),S()}),[b,c]),(0,o.useEffect)((function(){R(),S()}),[c,L]);return(0,m.jsxs)("main",{children:[(0,m.jsx)("canvas",{className:"block absolute top-0 left-0 right-0 bottom-0",ref:e}),(0,m.jsxs)("div",{className:"absolute top-0 left-0 right-0",children:[(0,m.jsx)(g,{}),(0,m.jsx)("div",{className:"bg-gray-800 bg-opacity-50 flex justify-center",children:(0,m.jsxs)("div",{className:"flex justify-between container",children:[(0,m.jsxs)("div",{className:"flex align-middle items-center mx-3 gap-x-3",children:[(0,m.jsx)("label",{htmlFor:"Iterations",className:"text-white",children:"Iterations"}),(0,m.jsx)("input",{type:"range",min:1,max:500,value:b,onChange:function(e){return w(parseInt(e.target.value))}})]}),(0,m.jsxs)("div",{className:"flex flex-row-reverse mx-3 gap-x-3",children:[(0,m.jsx)("div",{className:"bg-blue-400 rounded px-3 py-2 my-2",children:(0,m.jsx)("button",{onClick:function(){if(e.current){var t=document.createElement("a");t.download="Mandelbrot.png",t.href=e.current.toDataURL("img/png"),t.click()}},children:(0,m.jsx)("p",{className:"text-bold",children:"Download"})})}),(0,m.jsx)("div",{className:"bg-green-400 rounded px-3 py-2 my-2",children:(0,m.jsx)("button",{onClick:function(){A([0,0]),N(!1),x(1),w(80)},children:(0,m.jsx)("p",{className:"text-bold",children:"Reset"})})})]})]})})]})]})},p=n(9008),b=function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(p.default,{children:[(0,m.jsx)("title",{children:"Mandelbrot set visualization"}),(0,m.jsx)("meta",{property:"og:title",content:"Mandelbrot set visualization"}),(0,m.jsx)("meta",{name:"description",property:"og:description",content:"See the mandelbrot set in real time!"}),(0,m.jsx)("meta",{name:"keywords",content:"mandelbrot visualization interactive realtime webgl"}),(0,m.jsx)("meta",{property:"og:image",itemProp:"image",content:"screenshot.png"})]}),(0,m.jsx)(x,{})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7364)}])}},function(e){e.O(0,[831,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);