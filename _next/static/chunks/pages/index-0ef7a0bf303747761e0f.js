(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7364:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var r=t(266),i=t(809),a=t.n(i),s=t(7294),o=function(){var e=(0,s.useState)(),n=e[0],t=e[1];return(0,s.useEffect)((function(){var e=function(){t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},u=t(8216),c=t(5997),l=t(2809),f=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,r=t.text(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(e,n,t){var r=e.createShader(n);if(r){if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log(e.getShaderInfoLog(r))}throw e.deleteShader(r),"Could not create shader"},h=function(){function e(n,t,r){(0,u.Z)(this,e),(0,l.Z)(this,"gl",void 0),(0,l.Z)(this,"prog",void 0),this.gl=n;var i=new Uint8Array([0,1,2,2,1,3]),a=new Float32Array([-1,-1,1,-1,-1,1,1,1]),s=d(this.gl,n.VERTEX_SHADER,t),o=d(this.gl,n.FRAGMENT_SHADER,r);this.prog=function(e,n,t){var r=e.createProgram();if(r){if(e.attachShader(r,n),e.attachShader(r,t),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r))}throw e.deleteProgram(r),"Could not create Program"}(this.gl,s,o),n.useProgram(this.prog);var c=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,c),n.bufferData(n.ARRAY_BUFFER,a,n.STATIC_DRAW);var f=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,f),n.bufferData(n.ELEMENT_ARRAY_BUFFER,i,n.STATIC_DRAW);var h=n.getAttribLocation(this.prog,"pos"),v=n.createVertexArray();n.bindVertexArray(v),n.enableVertexAttribArray(h),n.vertexAttribPointer(h,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,f)}return(0,c.Z)(e,[{key:"uniformLoc",value:function(e){return this.gl.getUniformLocation(this.prog,e)}},{key:"setFloat",value:function(e,n){var t=this.gl,r=this.uniformLoc(e);t.uniform1f(r,n)}},{key:"setVec2",value:function(e,n){var t=this.gl,r=this.uniformLoc(e);t.uniform2f(r,n[0],n[1])}},{key:"setVec3",value:function(e,n){var t=this.gl,r=this.uniformLoc(e);t.uniform3f(r,n[0],n[1],n[2])}},{key:"setVec4",value:function(e,n){var t=this.gl,r=this.uniformLoc(e);t.uniform4f(r,n[0],n[1],n[2],n[3])}},{key:"quad",value:function(){var e=this.gl;e.drawElements(e.TRIANGLES,6,e.UNSIGNED_BYTE,0)}}]),e}(),v=t(1664),m=(t(6049),t(5893)),x=function(){return(0,m.jsx)("div",{className:"text-white bg-gray-900 bg-opacity-50 p-3 flex justify-center",children:(0,m.jsx)("div",{className:"container mx-2 lg:mx-auto",children:(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{children:(0,m.jsx)(v.default,{passHref:!0,href:"/",children:(0,m.jsx)("div",{className:"btn btn-effect flex align-middle items-center py-1",children:(0,m.jsx)("h1",{className:"text-xl",children:"Mandelbrot set visualization"})})})}),(0,m.jsx)("div",{className:"flex gap-x-3",children:(0,m.jsx)("span",{className:"inline-block",children:(0,m.jsx)(v.default,{passHref:!0,href:"https://github.com/SushiWaUmai/Mandelbrot-Visualization",children:(0,m.jsx)("div",{className:"btn btn-effect flex align-middle items-center py-1",children:(0,m.jsx)("h1",{className:"text-bold",children:"Github"})})})})})]})})})},g=t(9008),p=function(){var e=(0,s.useRef)(null),n=(0,s.useState)(),t=n[0],i=n[1],u=(0,s.useState)(),c=u[0],l=u[1],d=(0,s.useState)(1),v=d[0],p=d[1],w=(0,s.useState)(80),b=w[0],E=w[1],j=(0,s.useState)(!1),N=j[0],_=j[1],A=(0,s.useState)([0,0]),L=A[0],y=A[1],R=o(),S=function(){null===c||void 0===c||c.quad()},k=function(){if(e.current){var n=window.innerWidth,r=window.innerHeight;e.current.width=n,e.current.height=r,null===t||void 0===t||t.viewport(0,0,n,r),null===c||void 0===c||c.setVec2("_screenSize",[n,r])}};(0,s.useEffect)((function(){var n=function(){var n=(0,r.Z)(a().mark((function n(){var t,r,s,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.current){n.next=16;break}if(t=e.current.getContext("webgl2",{preserveDrawingBuffer:!0})){n.next=5;break}return console.log("No WebGL2 avaiable"),n.abrupt("return");case 5:return n.next=7,f("shaders/mandelbrot.vert");case 7:return r=n.sent,n.next=10,f("shaders/mandelbrot.frag");case 10:s=n.sent,o=new h(t,r,s),l(o),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),i(t);case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();k(),n(),S()}),[]),(0,s.useEffect)((function(){var n,t=function(e){var n=window.innerWidth,t=window.innerHeight,r=e.deltaY>0?1:-1,i=Math.exp(.2*r),a=v*i-v,s=L[0]-function(e){return 2*(e/t-.5)-(n-t)/t}(e.pageX)*a,o=L[1]+function(e){return 2*(e/t-.5)}(e.pageY)*a;p(v*i),y([s,o])};return null===(n=e.current)||void 0===n||n.addEventListener("wheel",t),function(){var n;null===(n=e.current)||void 0===n||n.removeEventListener("wheel",t)}}),[e,v,L]),(0,s.useEffect)((function(){window.innerWidth;var n,t,r,i=window.innerHeight,a=function(){_(!0)},s=function(e){N&&y((function(n){return[n[0]-2*e.movementX/i*v,n[1]+2*e.movementY/i*v]}))},o=function(){_(!1)};return null===(n=e.current)||void 0===n||n.addEventListener("mousedown",a),null===(t=e.current)||void 0===t||t.addEventListener("mousemove",s),null===(r=e.current)||void 0===r||r.addEventListener("mouseup",o),function(){var n,t,r;null===(n=e.current)||void 0===n||n.removeEventListener("mousedown",a),null===(t=e.current)||void 0===t||t.removeEventListener("mousemove",s),null===(r=e.current)||void 0===r||r.removeEventListener("mouseup",o)}}),[N,L,v]),(0,s.useEffect)((function(){null===c||void 0===c||c.setFloat("_scale",v),null===c||void 0===c||c.setVec2("_center",L),S()}),[L,c]),(0,s.useEffect)((function(){null===c||void 0===c||c.setFloat("_iterations",b),S()}),[b,c]),(0,s.useEffect)((function(){k(),S()}),[c,R]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(g.default,{children:(0,m.jsx)("title",{children:"Mandelbrot set visualization"})}),(0,m.jsxs)("main",{children:[(0,m.jsx)("canvas",{className:"block absolute top-0 left-0 right-0 bottom-0",ref:e}),(0,m.jsxs)("div",{className:"absolute top-0 left-0 right-0",children:[(0,m.jsx)(x,{}),(0,m.jsx)("div",{className:"bg-gray-800 bg-opacity-50 flex justify-center",children:(0,m.jsxs)("div",{className:"flex justify-between container",children:[(0,m.jsxs)("div",{className:"flex align-middle items-center mx-3 gap-x-3",children:[(0,m.jsx)("label",{className:"text-white",children:"Iterations"}),(0,m.jsx)("input",{type:"range",min:1,max:500,value:b,onChange:function(e){return E(parseInt(e.target.value))}})]}),(0,m.jsxs)("div",{className:"flex flex-row-reverse mx-3 gap-x-3",children:[(0,m.jsx)("div",{className:"bg-blue-400 rounded px-3 py-2 my-2",children:(0,m.jsx)("button",{onClick:function(){if(e.current){var n=document.createElement("a");n.download="Mandelbrot.png",n.href=e.current.toDataURL("img/png"),n.click()}},children:(0,m.jsx)("h1",{className:"text-bold",children:"Download"})})}),(0,m.jsx)("div",{className:"bg-green-400 rounded px-3 py-2 my-2",children:(0,m.jsx)("button",{onClick:function(){y([0,0]),_(!1),p(1),E(80)},children:(0,m.jsx)("h1",{className:"text-bold",children:"Reset"})})})]})]})})]})]})]})},w=function(){return(0,m.jsx)(p,{})}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7364)}])}},function(e){e.O(0,[831,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);